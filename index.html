<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ScopeChecker | Referral Tool</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="/assets/logo.png">
</head>
<body>

    <div class="container">
        <header>
            <img src="/assets/logo.png" alt="ScopeChecker Logo" class="header-logo">
            <h1>ScopeChecker</h1>
            <p>Endoscopy Referral & Triage Tool</p>
        </header>

        <form id="referral-form">
            <div class="card">
                <div class="card-header">
                    <h2>Patient Details</h2>
                </div>
                <div class="form-group">
                    <label for="age">Age</label>
                    <input type="number" id="age" name="age" placeholder="e.g., 55" required>
                </div>
                <div class="form-group">
                    <label>Sex</label>
                    <div class="radio-group">
                        <input type="radio" id="sex-male" name="sex" value="Male">
                        <label for="sex-male">Male</label>
                        <input type="radio" id="sex-female" name="sex" value="Female" checked>
                        <label for="sex-female">Female</label>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2>Symptoms & History</h2>
                </div>
                <div class="form-group">
                    <label>Rectal Bleeding</label>
                    <div class="radio-group">
                        <input type="radio" id="bleeding-yes" name="rectal_bleeding" value="Yes">
                        <label for="bleeding-yes">Yes</label>
                        <input type="radio" id="bleeding-no" name="rectal_bleeding" value="No" checked>
                        <label for="bleeding-no">No</label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Change in Bowel Habit</label>
                    <div class="radio-group">
                        <input type="radio" id="abh-yes" name="bowel_habit" value="Yes">
                        <label for="abh-yes">Yes</label>
                        <input type="radio" id="abh-no" name="bowel_habit" value="No" checked>
                        <label for="abh-no">No</label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Iron Deficiency Anemia</label>
                    <div class="radio-group">
                        <input type="radio" id="ida-yes" name="ida" value="Yes">
                        <label for="ida-yes">Yes</label>
                        <input type="radio" id="ida-no" name="ida" value="No" checked>
                        <label for="ida-no">No</label>
                    </div>
                </div>
                 <div class="form-group">
                    <label>Unexplained Weight Loss</label>
                    <div class="radio-group">
                        <input type="radio" id="weightloss-yes" name="weightloss" value="Yes">
                        <label for="weightloss-yes">Yes</label>
                         <input type="radio" id="weightloss-no" name="weightloss" value="No" checked>
                        <label for="weightloss-no">No</label>
                    </div>
                </div>
                 <div class="form-group">
                    <label>Imaging finding (Polyp/Mass)</label>
                    <div class="radio-group">
                        <input type="radio" id="polyp-yes" name="polyp" value="Yes">
                        <label for="polyp-yes">Yes</label>
                         <input type="radio" id="polyp-no" name="polyp" value="No" checked>
                        <label for="polyp-no">No</label>
                    </div>
                </div>
                 <div class="form-group">
                    <label>Assessment for IBD</label>
                    <div class="radio-group">
                        <input type="radio" id="ibd-yes" name="ibd" value="Yes">
                        <label for="ibd-yes">Yes</label>
                         <input type="radio" id="ibd-no" name="ibd" value="No" checked>
                        <label for="ibd-no">No</label>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2>Surveillance & Family History</h2>
                </div>
                <div class="form-group">
                    <label>Is this for surveillance?</label>
                    <div class="radio-group">
                        <input type="radio" id="surveillance-yes" name="surveillance" value="Yes">
                        <label for="surveillance-yes">Yes</label>
                        <input type="radio" id="surveillance-no" name="surveillance" value="No" checked>
                        <label for="surveillance-no">No</label>
                    </div>
                </div>
                <div class="form-group" id="last-scope-container" style="display: none;">
                    <label for="last-scope-date">Date of last scope</label>
                    <input type="date" id="last-scope-date" name="last_scope_date">
                </div>
                <div class="form-group">
                    <label>Family History of CRC</label>
                    <div class="radio-group-vertical">
                        <input type="radio" id="fam-hist-no" name="family" value="no" checked>
                        <label for="fam-hist-no">No significant history</label>
                        <input type="radio" id="fam-hist-cat2" name="family" value="category2">
                        <label for="fam-hist-cat2">1st-degree relative &lt;55 OR two 1st-degree relatives</label>
                         <input type="radio" id="fam-hist-cat3" name="family" value="category3">
                         <label for="fam-hist-cat3">Known syndrome or >3 affected relatives</label>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2>Fitness Assessment</h2>
                </div>
                <div class="form-group">
                    <label>Cognition OK for prep?</label>
                    <div class="radio-group">
                        <input type="radio" id="cognition-yes" name="cognition" value="yes" checked>
                        <label for="cognition-yes">Yes</label>
                        <input type="radio" id="cognition-no" name="cognition" value="no">
                        <label for="cognition-no">No</label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Severe Comorbidities?</label>
                    <div class="radio-group">
                        <input type="radio" id="comorbidity-yes" name="comorbidity" value="yes">
                        <label for="comorbidity-yes">Yes</label>
                        <input type="radio" id="comorbidity-no" name="comorbidity" value="no" checked>
                        <label for="comorbidity-no">No</label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Can tolerate bowel prep?</label>
                     <div class="radio-group">
                        <input type="radio" id="prep-yes" name="prep" value="no" checked>
                        <label for="prep-yes">Yes</label>
                        <input type="radio" id="prep-no" name="prep" value="yes">
                        <label for="prep-no">No</label>
                    </div>
                </div>
                <div class="form-group">
                    <label>High sedation risk?</label>
                     <div class="radio-group">
                        <input type="radio" id="sedation-yes" name="sedation" value="yes">
                        <label for="sedation-yes">Yes</label>
                        <input type="radio" id="sedation-no" name="sedation" value="no" checked>
                        <label for="sedation-no">No</label>
                    </div>
                </div>
                 <div class="form-group">
                    <label>ECOG Performance Status</label>
                    <div class="radio-group-vertical">
                        <input type="radio" id="ecog-0" name="ecog" value="0" checked>
                        <label for="ecog-0">0 - Fully active</label>
                        <input type="radio" id="ecog-1" name="ecog" value="1">
                        <label for="ecog-1">1 - Restricted</label>
                         <input type="radio" id="ecog-2" name="ecog" value="2">
                         <label for="ecog-2">2 - Ambulatory, unable to work</label>
                         <input type="radio" id="ecog-3" name="ecog" value="3">
                         <label for="ecog-3">3 - Limited self-care</label>
                         <input type="radio" id="ecog-4" name="ecog" value="4">
                         <label for="ecog-4">4 - Completely disabled</label>
                    </div>
                </div>
            </div>

            <div class="actions">
                <button type="submit" class="btn btn-primary">Assess Referral</button>
                <button type="reset" class="btn btn-secondary">Reset Form</button>
            </div>
        </form>

        <div id="result-container" class="card" style="display: none;">
             <div class="card-header">
                <h2>Assessment Result</h2>
            </div>
            <div id="result-content">
                <!-- Triage category and reasons will be injected here -->
            </div>
            <div class="result-footer" style="display: none;">
                <div id="email-success-notification" class="email-success-notification">
                    <!-- Success message will be injected here -->
                </div>
                <button type="button" id="debug-btn" class="btn btn-secondary">Copy Debug Info</button>
            </div>
        </div>

        <div id="bowel-prep-container" class="card" style="display: none;">
            <div class="card-header">
                <h2>Bowel Preparation</h2>
            </div>
            <div id="bowel-prep-content">
                <p>Please provide the patient with the appropriate leaflet and instructions based on the following plan.</p>
                
                <h5>Standard AM Colonoscopy</h5>
                <ul class="prep-list">
                    <li><span class="prep-label">Prep Issued:</span><span class="prep-text">PLENVU</span></li>
                    <li><span class="prep-label">Dietary Advice:</span><span class="prep-text">Low-residue diet for 3 days prior. No solid food on the day before the procedure. Clear fluids only.</span></li>
                    <li><span class="prep-label">Timing:</span><span class="prep-text">Dose 1: 5 PM evening before procedure.<br>Dose 2: 5 AM on the morning of procedure (must be finished 4 hours before).</span></li>
                </ul>

                <h5>Standard PM Colonoscopy</h5>
                 <ul class="prep-list">
                    <li><span class="prep-label">Prep Issued:</span><span class="prep-text">PLENVU</span></li>
                    <li><span class="prep-label">Dietary Advice:</span><span class="prep-text">Low-residue diet for 3 days prior. Light breakfast, then no solid food on the day before the procedure. Clear fluids only.</span></li>
                    <li><span class="prep-label">Timing:</span><span class="prep-text">Dose 1: 7 PM evening before procedure.<br>Dose 2: 7 AM on the morning of procedure (must be finished 4 hours before).</span></li>
                </ul>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html> 